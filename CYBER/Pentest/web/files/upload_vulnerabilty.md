# File Upload

we can override a file in a server .
for exeple if a server allow to upload image and the website use a image. we can send an image of the same name.

## RCE:

take an exeple of a apache server .
we can send a basic php file and go to the link of the php file the server will translate it.
we can send a php/file as a webshell:
https://gist.github.com/joswr1ght/22f40787de19d80d110b37fb79ac3985

## File Type:

in windows we use a filetype extension to determine the type of the file like :
file.jpg

the file type is used to define the type of file we accept to send :
there is 2 validation :

## Client Side Verification :

the html / js of the client test that the file type is correct.

### bypass client-side verification:

to bypass there are multiple possiblity :

-   in burp suite intercept the request and send the file you want
    send a file with correct extension
    change the file name and type in the request sent
-   deactivate JS and send what you want

## Server Side Verification :

there is multiple type of validation as file type validation :

-   extension validation:
    check the file name extensions used by windows

-   file type filtering:
    check the content to determine the file type :
-   -   Magic Number :
        the file start with a special binary to determine the file type
-   -   MIME validation:
        MIME (Multipurpose Internet Mail Extension) types are used as an identifier for files but very easy to bypass

-   file length :
    not let file too big to be uploaded

-   file content:
    check the file content to determine the file type

### bypass server-side verification:

-   extension name:

1. try to put the extension checked in the filename (if the server only check that the extension is in the filename)
2. possiblity is to use a less know extension like php5/phtml for php file

-   magic number:
